(()=>{"use strict";const e=e=>{const t=document.createElement("img");return t.setAttribute("alt",e.flags.alt),t.setAttribute("src",e.flags.png),t},t=e=>{const t=document.createElement("p");for(const n of e){const e=document.createElement("div"),o=document.createElement("span");o.classList.add("infoTitle"),o.textContent=n.title+": ";const a=document.createElement("span");a.classList.add("infoVal"),a.textContent=n.val,e.appendChild(o),e.appendChild(a),t.appendChild(e)}return t},n=n=>{const o=document.querySelector("#cardsContainer");console.log("hi"),n.forEach((n=>{console.log(n.name.common),o.appendChild((n=>{const o=document.createElement("a"),a=e(n);o.appendChild(a);const c=document.createElement("h2");c.textContent=n.name.common,o.appendChild(c);const i=[{title:"Population",val:n.population},{title:"Region",val:n.region},{title:"Capital",val:n.capital}],r=t(i);return o.appendChild(r),o.setAttribute("href",`./countries/${n.name.common}`),o})(n))}))},o=document.querySelector("#searchInput"),a=document.querySelector("#dropDownFilter"),c=()=>{const e=new URL(location);e.searchParams.set("name",o.value),e.searchParams.set("region",a.value),window.history.pushState({},"",e),Window._cacheVLCountriesAPI.filter.name=o.value,Window._cacheVLCountriesAPI.filter.region=a.value,(()=>{const{countries:e}=Window._cacheVLCountriesAPI,{name:t,region:o}=Window._cacheVLCountriesAPI.filter,a=e.filter((e=>(e.region==o||""==o)&&(e.name.common.toLowerCase().includes(t.toLowercase)||e.name.official.toLowerCase().includes(t))));document.querySelector("#cardsContainer").replaceChildren(),n(a)})()},i=e=>Window._cacheVLCountriesAPI.countries.find((t=>t.cca3===e));!async function(){Window._cacheVLCountriesAPI={},Window._cacheVLCountriesAPI.countries=await(async()=>{const e=await fetch("https://restcountries.com/v3.1/all"),t=await(async e=>{const t=e.getReader(),n=[];return await async function e(){const{done:o,value:a}=await t.read();if(!o)return n.push(a),e()}(),n})(e.body),n=new TextDecoder;let o="";for(const e of t)o+=n.decode(e);return JSON.parse(o)})(),Window._cacheVLCountriesAPI.filter={};let r=new URL(location);switch(console.log(r),!0){case"/"==r.pathname:a.addEventListener("change",c),o.addEventListener("change",c),n(Window._cacheVLCountriesAPI.countries);break;case/^\/countries\/[a-zA-Z]+$/.test(r.pathname):const s=/\b[a-zA-Z-,]+$/,l=r.pathname.match(s)[0];console.log(l),(n=>{const o=document.querySelector("main");o.id="countryDetails",o.replaceChildren();const a=document.createElement("a");a.setAttribute("href","#"),a.addEventListener("click",history.back),a.textContent="Back",o.appendChild(a);const c=(e=>Window._cacheVLCountriesAPI.countries.find((t=>t.name.common.toLowerCase()===e.toLowerCase())))(n),r=e(c);o.appendChild(r);const s=document.createElement("h2");s.textContent=c.name.common,o.appendChild(s);const l=[{title:"Native name",val:(e=>{const t=Object.keys(e.languages)[0];return e.name.nativeName[t].common})(c)},{title:"Population",val:new Intl.NumberFormat("US").format(c.population)},{title:"Region",val:c.region},{title:"Sub Region",val:c.subregion},{title:"Capital",val:c.capital},{title:"Top Level Domain",val:c.tld[0]},{title:"Currencies",val:Object.keys(c.currencies).map((e=>c.currencies[e].name)).join(", ")},{title:"Languages",val:Object.keys(c.languages).map((e=>c.languages[e])).reverse().join(", ")}],d=t(l);o.appendChild(d);const u=document.createElement("div"),m=document.createElement("span");m.classList.add("infoTitle"),m.textContent="Border Countries:",u.appendChild(m);const p=document.createElement("div"),h=new URL(location).origin;for(const e of c.borders){const t=i(e),n=document.createElement("a");n.setAttribute("href",`${h}/countries/${t.name.common}`),n.classList.add("border-country-btn","btn"),n.textContent=t.name.common,p.appendChild(n)}u.appendChild(p),o.appendChild(u)})(l);break;default:console.log("HEY")}}()})();